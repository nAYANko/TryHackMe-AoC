# Day 4
*** Usage of CeWL ***

*************
CeWL is a custom wordlist generator that generates a list of potential passwords, by spidering. Spidering, in the context of web security and penetration testing, refers to the process of automatically navigating and cataloguing a website's content, often to retrieve the site structure, content, and other relevant details. It can also make a list of email addresses and usernames.

CeWL provides a lot of options that allow you to tailor the wordlist to your needs:

1. Specify spidering depth: The -d option allows you to set how deep CeWL should spider. For example, to spider two links deep: cewl http://MACHINE_IP -d 2 -w 
   output1.txt
2. Set minimum and maximum word length: Use the -m and -x options respectively. For instance, to get words between 5 and 10 characters: cewl http://MACHINE_IP -m 5 - 
   x 10 -w output2.txt
3. Handle authentication: If the target site is behind a login, you can use the -a flag for form-based authentication.
4. Custom extensions: The --with-numbers option will append numbers to words, and using --extension allows you to append custom extensions to each word, making it 
   useful for directory or file brute-forcing.
5. Follow external links: By default, CeWL doesn't spider external sites, but using the --offsite option allows you to do so.

![VirtualBox_Ayan_21_12_2023_22_41_27](https://github.com/nAYANko/TryHackMe-AoC/assets/147973815/328fe3a5-3bb2-4ee1-a800-6074d18d86bc)

************

Now onto the challenge,

We need to use CeWL to create a passwords and a users list and use wfuzz brute force to break into the login

1. Intall cewl and make a list of passwords and usernames and save it to passwords.txt and usernames.txt

![VirtualBox_Ayan_21_12_2023_23_01_04](https://github.com/nAYANko/TryHackMe-AoC/assets/147973815/733385c5-d469-40f9-83b1-d4ffcff008f7)

2. Now install and run wfuzz command to brute force into /login.php using list of usernames and passwords,

```
wfuzz -c -z file,usernames.txt -z file,passwords.txt --hs "Please enter the correct credentials" -u http://MACHINE_IP/login.php -d "username=FUZZ&password=FUZ2Z"
```
1. -z file,usernames.txt loads the usernames list.
2. -z file,passwords.txt uses the password list generated by CeWL.
3. --hs "Please enter the correct credentials" hides responses containing the string "Please enter the correct credentials", which is the message displayed for 
     wrong login attempts.
4. -u specifies the target URL.
5. -d "username=FUZZ&password=FUZ2Z" provides the POST data format where FUZZ will be replaced by usernames and FUZ2Z by passwords.

!!! Now when i ran the given syntax on my ubuntu machine, it showed a 'no plugin found' error, while researching a little bit i found that its a system bug and is yet to be fixed 

So i used the tryhackme attack machine instead to use wfuzz which tries every username to every password to get the final username and password,

![Screenshot (104)](https://github.com/nAYANko/TryHackMe-AoC/assets/147973815/6d2737fc-a13e-447b-8a83-d1e5e1a621c8)

After getting the credentials {user:pass}->{isaias:Happiness} we use them to logon to the http://"IP"/login.php and we get the dashboard screen

![Screenshot (105)](https://github.com/nAYANko/TryHackMe-AoC/assets/147973815/1efa0894-37fb-47f6-9180-a37d5ee41628)

We see a confidential message in which we find out flag : 'THM{m3rrY4nt4rct1crAft$}'

![Screenshot (106)](https://github.com/nAYANko/TryHackMe-AoC/assets/147973815/3df9871a-c9d9-486c-a5c9-9fbecd6569bb)


